<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder - Survey</title>

    <!-- link to bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- link to the css stylesheet -->
    <link rel="stylesheet" href="./css/style.css" media="screen" title="no title">
    <!-- jquery link -->
    <script src="https://code.jquery.com/jquery-3.4.0.js"
        integrity="sha256-DYZMCC8HTC+QDr5QNaIcfR7VSPtcISykd+6eSmBW5qo=" crossorigin="anonymous"></script>
    <!-- and then bootstrap after -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container">
        <div class="jumbotron">
        <h1>Survey Questions</h1>
        <hr>
        <h1>About You</h1>
        <p>Name (Required)</p>
        <input class="form-control validate" id="user-name" type="text" placeholder="Your Name">
        <br>
        <p>Link to Photo Image (Required)</p>
        <input class="form-control validate" id="user-photo" type="text" placeholder="Link to a Photo">
        <hr>
        <h1>Question 1</h1>
        <p>You enjoy vibrant social events with lots of people.</p>
        <div class="form-group">
            <select class="form-control" id="question1">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 2</h1>
        <p>You often spend time exploring unrealistic yet intriguing ideas.</p>
        <div class="form-group">
            <select class="form-control" id="question2">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 3</h1>
        <p>Your travel plans are more likely to look like a rough list of ideas than a detailed itinerary.</p>
        <div class="form-group">
            <select class="form-control" id="question3">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 4</h1>
        <p>You often think about what you should have said in a conversation long after it has taken place.</p>
        <div class="form-group">
            <select class="form-control" id="question4">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 5</h1>
        <p>If your friend is sad about something, your first instinct is to support them emotionally, not try to solve
            their problem.</p>
        <div class="form-group">
            <select class="form-control" id="question5">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 6</h1>
        <p>People can rarely upset you.</p>
        <div class="form-group">
            <select class="form-control" id="question6">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 7</h1>
        <p>You often rely on other people to be the ones to start a conversation and keep it going.</p>
        <div class="form-group">
            <select class="form-control" id="question7">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 8</h1>
        <p>You rarely worry if you made a good impression on someone you met.</p>
        <div class="form-group">
            <select class="form-control" id="question8">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 9</h1>
        <p>It would be a challenge for you to spend the whole weekend all by yourself without feeling bored.</p>
        <div class="form-group">
            <select class="form-control" id="question9">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        <h1>Question 10</h1>
        <p>You are more of a detail-oriented than a big picture person.</p>
        <div class="form-group">
            <select class="form-control" id="question10">
                <option value="1">1 - Strongly Disagree</option>
                <option value="2">2 - Disagree</option>
                <option value="3">3 - Meh</option>
                <option value="4">4 - Agree</option>
                <option value="5">5 - Strongly Agree</option>
            </select>
        </div>
        </div>

        <button type="submit" class="btn btn-primary btn-lg btn-block modal-trigger" id="survey-submit">Submit
            Survey</button>

            <p><a style="color:#FA1010" href="/api/friends">API Friends List</a> | <a style="color:#FA1010" href="https://github.com/TheRealCamarones/Friend-Finder"
                    target="_blank">GitHub Repo</a></p>

        <!-- create the modal structure to display the match -->
        <div id="theModal" class="modal">
            <div class="modal-content">
                <h1>Here's Your New Friend:</h1>
                <h3 id="friendName"></h3>
                <img id="friendPicture" width=400px height=400px>
            </div>
        </div>

    </div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#survey-submit").on("click", function () {
                var valid = true;
                // I wanted to validate, but it keeps breaking the whole thing
                // it'll be added in here one day

                if (valid === true) {
                    var createFriend = {
                        name: $("#user-name").val().trim(),
                        image: $("#user-photo").val().trim(),
                        scores: [
                            $("#question1").val(),
                            $("#question2").val(),
                            $("#question3").val(),
                            $("#question4").val(),
                            $("#question5").val(),
                            $("#question6").val(),
                            $("#question7").val(),
                            $("#question8").val(),
                            $("#question9").val(),
                            $("#question10").val(),
                        ]
                    };
                    var currentURL = window.location.origin;
                    // use AJAX to send info the the API
                    $.post(currentURL + "/api/friends", createFriend, function (data) {
                        $("#friendName").text(data.name);
                        $("#friendPicture").attr("src", data.photo);
                    });
                    
                    // then display the modal
                    $(".modal").modal();
                    // clear the form just for aesthetics
                    $("#user-name").val("");
                    $("#user-picture").val("");
                    $("#question1").val("");
                    $("#question2").val("");
                    $("#question3").val("");
                    $("#question4").val("");
                    $("#question5").val("");
                    $("#question6").val("");
                    $("#question7").val("");
                    $("#question8").val("");
                    $("#question9").val("");
                    $("#question10").val("");
                } else {
                    alert("You can't make friends without telling them your name and showing them a picture of yourself, silly!")
                }
            });
        });
    </script>
</body>

</html>